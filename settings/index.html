<html>
<head>
	<script type="text/javascript" src="/homey.js" data-origin="settings"></script>
</head>

<body>
	<header class="homey-header">
		<h1 class="homey-title" data-i18n="settings.title">
			<!-- This will be filled with the translated string with key 'settings.title'. -->
		</h1>
		<p class="homey-subtitle" data-i18n="settings.description">
			<!-- This field will also be translated -->
		</p>
	</header>
	<fieldset class="homey-form-fieldset">
		<legend class="homey-form-legend" data-i18n="settings.title"></legend>
        <div class="homey-form-group">
            <label class="homey-form-label" for="postcode" data-i18n="settings.postcode"></label>
            <input class="homey-form-input" placeholder="1234AB" id="postcode" maxlength="6" type="text" value=""/>
        </div>
		<div class="homey-form-group" id="streetName_div">
            <label class="homey-form-label" for="streetName" data-i18n="settings.streetname"></label>
            <input class="homey-form-input" placeholder="Van Homeystraat" id="streetName" type="text" value=""/>
        </div>
        <div class="homey-form-group">
            <label class="homey-form-label" for="number" data-i18n="settings.hnumber"></label>
            <input class="homey-form-input" placeholder="42" id="number" type="text" value=""/>
        </div>
        <div class="homey-form-group">
			<label class="homey-form-label" for="country" data-i18n="settings.country"></label>
			<select class="homey-form-select" id="country">
				<option value="NL">NL</option>
				<option value="BE">BE</option>
			</select>
        </div>
        <div class="homey-form-group">
			<label class="homey-form-label" for="api" data-i18n="settings.api"></label>
			<select class="homey-form-select" id="api">
				<option value="" data-i18n="settings.unknown"></option>
				<option value="afa">Afval App (NL)</option>
				<option value="acv">Afvalkalender ACV (NL)</option>
				<option value="alm">Afvalkalender Almere (NL)</option>
				<option value="afbar">Afvalkalender BAR (NL)</option>
				<option value="acb">Afvalkalender Circulus-Berkel (NL)</option>
				<option value="afc">Afvalkalender Cyclus (NL)</option>
				<option value="dar">Afvalkalender Dar (NL)</option>
				<option value="akel">Afvalkalender Etten-Leur (NL)</option>
				<option value="akm">Afvalkalender Meerlanden (NL)</option>
				<option value="akpm">Afvalkalender Peel en Maas (NL)</option>
				<option value="akpu">Afvalkalender Purmerend (NL)</option>
				<option value="akpu">Afvalkalender RAD (NL)</option>
				<option value="rd4">Afvalkalender RD4 (NL)</option>
				<option value="aknw">Afvalkalender Reinis (NL)</option>
				<option value="afrm">Afvalkalender RMN (NL)</option>
				<option value="rov">Afvalkalender ROVA (NL)</option>
				<option value="rwm">Afvalkalender RWM (NL)</option>
				<option value="svr">Afvalkalender Saver (NL)</option>
				<option value="swf">Afvalkalender Súdwest-Fryslân</option>
				<option value="akvr">Afvalkalender Venray (NL)</option>
				<option value="akwl">Afvalkalender Westland (NL)</option>
				<option value="afzrd">Afvalkalender ZRD (NL)</option>
				<option value="mont">Afvalwijzer Montferland (NL)</option>
				<option value="arn">Afvalwijzer Pre Zero (NL)</option>
				<option value="arei">Area Reiniging (NL)</option>
				<option value="avx">Avalex (NL)</option>
				<option value="avr">Avri (NL)</option>
				<option value="dbafw">Den Bosch Afvalstoffendienstkalender (NL)</option>
				<option value="gad">GAD Gooi en Vechtstreek (NL)</option>
				<option value="gemas">Gemeente Assen (NL)</option>
				<option value="geh">Gemeente Hellendoorn (NL)</option>
				<option value="gem">Gemeente Meppel (NL)</option>
				<option value="hkdh">Huisvuilkalender Den Haag (NL)</option>
				<option value="hvc">Inzamelkalender HVC (NL)</option>
				<option value="afw">Mijn Afvalwijzer (NL)</option>
				<option value="mba">Mijn Blink (NL)</option>
				<option value="remg">Recyclemanager (NL)</option>
				<option value="rewl">Reinigingsdienst Waardlanden (NL)</option>
				<option value="twm">Twente Milieu (NL)</option>
				<option value="recbe">Recycle! App (BE)</option>
			</select>
        </div>
		<div class="homey-form-group">
			<label class="homey-form-label" for="cleanApi" data-i18n="settings.cleanApi"></label>
			<select class="homey-form-select" id="cleanApi">
				<option value="not-applicable" data-i18n="settings.notapplicable"></option>
				<option value="" data-i18n="settings.unknown"></option>
				<option value="cpfs">Clean Profs (NL)</option>
			</select>
        </div>
        <span id="resp" title="Details?" onclick="document.getElementById('respDates').style='display: block;'"></span>
        <span id="respDates" style="display: none;"></span>
    </fieldset>
    <button id="apiSave" class="homey-button-primary-full" data-i18n="settings.save" ></button>
	<br /><br />

	<fieldset id="manual_input" class="homey-form-fieldset">
		<legend class="homey-form-legend" data-i18n="settings.titlemanualinput"></legend>

		<!-- GFT -->
		<div class="homey-form-group">
			<label class="homey-form-label" for="gft" data-i18n="settings.gft"></label>
			<div>
				<select class="homey-form-select" name="gft[option]" id="gft_option">
					<option value="-1" data-i18n="settings.interval.na"></option>
					<option value="0" data-i18n="settings.interval.automatic"></option>
					<option value="1" data-i18n="settings.interval.everyweek"></option>
					<option value="2" data-i18n="settings.interval.everyotherweek"></option>
					<option value="3" data-i18n="settings.interval.everythreeweeks"></option>
					<option value="4" data-i18n="settings.interval.everyfourweeks"></option>
					<option value="6" data-i18n="settings.interval.everysixweeks"></option>
					<option value="8" data-i18n="settings.interval.everyeighthweeks"></option>
					<option value="11" data-i18n="settings.interval.everyfirst"></option>
					<option value="12" data-i18n="settings.interval.everysecond"></option>
					<option value="13" data-i18n="settings.interval.everythird"></option>
					<option value="14" data-i18n="settings.interval.everyfourth"></option>
					<option value="20" data-i18n="settings.interval.everysecondlast"></option>
					<option value="19" data-i18n="settings.interval.everylast"></option>
				</select>
			</div>
			<div id="gft_day_div">
				<select class="homey-form-select" style="margin-left: 5px;" name="gft[day_of_week]" id="gft_dayofweek">
					<option value="1" data-i18n="settings.dayofweek.mo"></option>
					<option value="2" data-i18n="settings.dayofweek.tu"></option>
					<option value="3" data-i18n="settings.dayofweek.we"></option>
					<option value="4" data-i18n="settings.dayofweek.th"></option>
					<option value="5" data-i18n="settings.dayofweek.fr"></option>
					<option value="6" data-i18n="settings.dayofweek.sa"></option>
					<option value="0" data-i18n="settings.dayofweek.su"></option>
				</select>
			</div>
			<div>
				<select class="homey-form-select" style="display:none; margin-left: 5px;" name="gft[option_extension]" id="gft_option_extension">
					<option value="1" data-i18n="settings.interval_extra.month"></option>
					<option value="2" data-i18n="settings.interval_extra.othermonth"></option>
					<option value="3" data-i18n="settings.interval_extra.quarter"></option>
					<option value="12" data-i18n="settings.interval_extra.year"></option>
				</select>
			</div>
			<div id="gft_startdate_div">
				<p style="display: inline; margin-left: 5px;" for="startdate" data-i18n="settings.startdate"></p>
				<input class="homey-form-input" style="display: inline; margin-left: 5px;" type="date" name="gft[startdate]" id="gft_startdate"></input>
			</div>
        </div>

		<!-- REST -->
		<div class="homey-form-group">
			<label class="homey-form-label" for="rest" data-i18n="settings.rest"></label>
			<div>
				<select class="homey-form-select" name="rest[option]" id="rest_option">
					<option value="-1" data-i18n="settings.interval.na"></option>
					<option value="0" data-i18n="settings.interval.automatic"></option>
					<option value="1" data-i18n="settings.interval.everyweek"></option>
					<option value="2" data-i18n="settings.interval.everyotherweek"></option>
					<option value="3" data-i18n="settings.interval.everythreeweeks"></option>
					<option value="4" data-i18n="settings.interval.everyfourweeks"></option>
					<option value="6" data-i18n="settings.interval.everysixweeks"></option>
					<option value="8" data-i18n="settings.interval.everyeighthweeks"></option>
					<option value="11" data-i18n="settings.interval.everyfirst"></option>
					<option value="12" data-i18n="settings.interval.everysecond"></option>
					<option value="13" data-i18n="settings.interval.everythird"></option>
					<option value="14" data-i18n="settings.interval.everyfourth"></option>
					<option value="20" data-i18n="settings.interval.everysecondlast"></option>
					<option value="19" data-i18n="settings.interval.everylast"></option>
				</select>
			</div>
			<div id="rest_day_div">
				<select class="homey-form-select" style="margin-left: 5px;" name="rest[day_of_week]" id="rest_dayofweek">
					<option value="1" data-i18n="settings.dayofweek.mo"></option>
					<option value="2" data-i18n="settings.dayofweek.tu"></option>
					<option value="3" data-i18n="settings.dayofweek.we"></option>
					<option value="4" data-i18n="settings.dayofweek.th"></option>
					<option value="5" data-i18n="settings.dayofweek.fr"></option>
					<option value="6" data-i18n="settings.dayofweek.sa"></option>
					<option value="0" data-i18n="settings.dayofweek.su"></option>
				</select>
			</div>
			<div>
				<select class="homey-form-select" style="display:none; margin-left: 5px;" name="rest[option_extension]" id="rest_option_extension">
					<option value="1" data-i18n="settings.interval_extra.month"></option>
					<option value="2" data-i18n="settings.interval_extra.othermonth"></option>
					<option value="3" data-i18n="settings.interval_extra.quarter"></option>
					<option value="12" data-i18n="settings.interval_extra.year"></option>
				</select>
			</div>
			<div id="rest_startdate_div">
				<p style="display: inline; margin-left: 5px;" for="startdate" data-i18n="settings.startdate"></p>
				<input class="homey-form-input" style="display: inline; margin-left: 5px;" type="date" name="rest[startdate]" id="rest_startdate"></input>
			</div>
        </div>

		<!-- PAPER -->
		<div class="homey-form-group">
			<label class="homey-form-label" for="paper" data-i18n="settings.paper"></label>
			<div>
				<select class="homey-form-select" name="paper[option]" id="paper_option">
					<option value="-1" data-i18n="settings.interval.na"></option>
					<option value="0" data-i18n="settings.interval.automatic"></option>
					<option value="1" data-i18n="settings.interval.everyweek"></option>
					<option value="2" data-i18n="settings.interval.everyotherweek"></option>
					<option value="3" data-i18n="settings.interval.everythreeweeks"></option>
					<option value="4" data-i18n="settings.interval.everyfourweeks"></option>
					<option value="6" data-i18n="settings.interval.everysixweeks"></option>
					<option value="8" data-i18n="settings.interval.everyeighthweeks"></option>
					<option value="11" data-i18n="settings.interval.everyfirst"></option>
					<option value="12" data-i18n="settings.interval.everysecond"></option>
					<option value="13" data-i18n="settings.interval.everythird"></option>
					<option value="14" data-i18n="settings.interval.everyfourth"></option>
					<option value="20" data-i18n="settings.interval.everysecondlast"></option>
					<option value="19" data-i18n="settings.interval.everylast"></option>
				</select>
			</div>
			<div id="paper_day_div">
				<select class="homey-form-select" style="margin-left: 5px;" name="paper[day_of_week]" id="paper_dayofweek">
					<option value="1" data-i18n="settings.dayofweek.mo"></option>
					<option value="2" data-i18n="settings.dayofweek.tu"></option>
					<option value="3" data-i18n="settings.dayofweek.we"></option>
					<option value="4" data-i18n="settings.dayofweek.th"></option>
					<option value="5" data-i18n="settings.dayofweek.fr"></option>
					<option value="6" data-i18n="settings.dayofweek.sa"></option>
					<option value="0" data-i18n="settings.dayofweek.su"></option>
				</select>
			</div>
			<div>
				<select class="homey-form-select" style="display:none; margin-left: 5px;" name="paper[option_extension]" id="paper_option_extension">
					<option value="1" data-i18n="settings.interval_extra.month"></option>
					<option value="2" data-i18n="settings.interval_extra.othermonth"></option>
					<option value="3" data-i18n="settings.interval_extra.quarter"></option>
					<option value="12" data-i18n="settings.interval_extra.year"></option>
				</select>
			</div>
			<div id="paper_startdate_div">
				<p style="display: inline; margin-left: 5px;" for="startdate" data-i18n="settings.startdate"></p>
				<input class="homey-form-input" style="display: inline; margin-left: 5px;" type="date" name="paper[startdate]" id="paper_startdate"></input>
			</div>
        </div>

		<!-- PLASTIC -->
		<div class="homey-form-group">
			<label class="homey-form-label" for="plastic" data-i18n="settings.plastic"></label>
			<div>
				<select class="homey-form-select" name="plastic[option]" id="plastic_option">
					<option value="-1" data-i18n="settings.interval.na"></option>
					<option value="0" data-i18n="settings.interval.automatic"></option>
					<option value="1" data-i18n="settings.interval.everyweek"></option>
					<option value="2" data-i18n="settings.interval.everyotherweek"></option>
					<option value="3" data-i18n="settings.interval.everythreeweeks"></option>
					<option value="4" data-i18n="settings.interval.everyfourweeks"></option>
					<option value="6" data-i18n="settings.interval.everysixweeks"></option>
					<option value="8" data-i18n="settings.interval.everyeighthweeks"></option>
					<option value="11" data-i18n="settings.interval.everyfirst"></option>
					<option value="12" data-i18n="settings.interval.everysecond"></option>
					<option value="13" data-i18n="settings.interval.everythird"></option>
					<option value="14" data-i18n="settings.interval.everyfourth"></option>
					<option value="20" data-i18n="settings.interval.everysecondlast"></option>
					<option value="19" data-i18n="settings.interval.everylast"></option>
				</select>
			</div>
			<div id="plastic_day_div">
				<select class="homey-form-select" style="margin-left: 5px;" name="plastic[day_of_week]" id="plastic_dayofweek">
					<option value="1" data-i18n="settings.dayofweek.mo"></option>
					<option value="2" data-i18n="settings.dayofweek.tu"></option>
					<option value="3" data-i18n="settings.dayofweek.we"></option>
					<option value="4" data-i18n="settings.dayofweek.th"></option>
					<option value="5" data-i18n="settings.dayofweek.fr"></option>
					<option value="6" data-i18n="settings.dayofweek.sa"></option>
					<option value="0" data-i18n="settings.dayofweek.su"></option>
				</select>
			</div>
			<div>
				<select class="homey-form-select" style="display:none; margin-left: 5px;" name="plastic[option_extension]" id="plastic_option_extension">
					<option value="1" data-i18n="settings.interval_extra.month"></option>
					<option value="2" data-i18n="settings.interval_extra.othermonth"></option>
					<option value="3" data-i18n="settings.interval_extra.quarter"></option>
					<option value="12" data-i18n="settings.interval_extra.year"></option>
				</select>
			</div>
			<div id="plastic_startdate_div">
				<p style="display: inline; margin-left: 5px;" for="startdate" data-i18n="settings.startdate"></p>
				<input class="homey-form-input" style="display: inline; margin-left: 5px;" type="date" name="plastic[startdate]" id="plastic_startdate"></input>
			</div>
        </div>

		<!-- PMD -->
		<div class="homey-form-group">
			<label class="homey-form-label" for="pmd" data-i18n="settings.pmd"></label>
			<div>
				<select class="homey-form-select" name="pmd[option]" id="pmd_option">
					<option value="-1" data-i18n="settings.interval.na"></option>
					<option value="0" data-i18n="settings.interval.automatic"></option>
					<option value="1" data-i18n="settings.interval.everyweek"></option>
					<option value="2" data-i18n="settings.interval.everyotherweek"></option>
					<option value="3" data-i18n="settings.interval.everythreeweeks"></option>
					<option value="4" data-i18n="settings.interval.everyfourweeks"></option>
					<option value="6" data-i18n="settings.interval.everysixweeks"></option>
					<option value="8" data-i18n="settings.interval.everyeighthweeks"></option>
					<option value="11" data-i18n="settings.interval.everyfirst"></option>
					<option value="12" data-i18n="settings.interval.everysecond"></option>
					<option value="13" data-i18n="settings.interval.everythird"></option>
					<option value="14" data-i18n="settings.interval.everyfourth"></option>
					<option value="20" data-i18n="settings.interval.everysecondlast"></option>
					<option value="19" data-i18n="settings.interval.everylast"></option>
				</select>
			</div>
			<div id="pmd_day_div">
				<select class="homey-form-select" style="margin-left: 5px;" name="pmd[day_of_week]" id="pmd_dayofweek">
					<option value="1" data-i18n="settings.dayofweek.mo"></option>
					<option value="2" data-i18n="settings.dayofweek.tu"></option>
					<option value="3" data-i18n="settings.dayofweek.we"></option>
					<option value="4" data-i18n="settings.dayofweek.th"></option>
					<option value="5" data-i18n="settings.dayofweek.fr"></option>
					<option value="6" data-i18n="settings.dayofweek.sa"></option>
					<option value="0" data-i18n="settings.dayofweek.su"></option>
				</select>
			</div>
			<div>
				<select class="homey-form-select" style="display:none; margin-left: 5px;" name="pmd[option_extension]" id="pmd_option_extension">
					<option value="1" data-i18n="settings.interval_extra.month"></option>
					<option value="2" data-i18n="settings.interval_extra.othermonth"></option>
					<option value="3" data-i18n="settings.interval_extra.quarter"></option>
					<option value="12" data-i18n="settings.interval_extra.year"></option>
				</select>
			</div>
			<div style="float: left;" id="pmd_startdate_div">
				<p style="display: inline; margin-left: 5px;" for="startdate" data-i18n="settings.startdate"></p>
				<input class="homey-form-input" style="display: inline; margin-left: 5px;" type="date" name="pmd[startdate]" id="pmd_startdate"></input>
			</div>
        </div>

		<!-- TEXTILE -->
		<div class="homey-form-group">
			<label class="homey-form-label" for="textile" data-i18n="settings.textile"></label>
			<div>
				<select class="homey-form-select" name="textile[option]" id="textile_option">
					<option value="-1" data-i18n="settings.interval.na"></option>
					<option value="0" data-i18n="settings.interval.automatic"></option>
					<option value="1" data-i18n="settings.interval.everyweek"></option>
					<option value="2" data-i18n="settings.interval.everyotherweek"></option>
					<option value="3" data-i18n="settings.interval.everythreeweeks"></option>
					<option value="4" data-i18n="settings.interval.everyfourweeks"></option>
					<option value="6" data-i18n="settings.interval.everysixweeks"></option>
					<option value="8" data-i18n="settings.interval.everyeighthweeks"></option>
					<option value="11" data-i18n="settings.interval.everyfirst"></option>
					<option value="12" data-i18n="settings.interval.everysecond"></option>
					<option value="13" data-i18n="settings.interval.everythird"></option>
					<option value="14" data-i18n="settings.interval.everyfourth"></option>
					<option value="20" data-i18n="settings.interval.everysecondlast"></option>
					<option value="19" data-i18n="settings.interval.everylast"></option>
				</select>
			</div>
			<div id="textile_day_div">
				<select class="homey-form-select" style="margin-left: 5px;" name="textile[day_of_week]" id="textile_dayofweek">
					<option value="1" data-i18n="settings.dayofweek.mo"></option>
					<option value="2" data-i18n="settings.dayofweek.tu"></option>
					<option value="3" data-i18n="settings.dayofweek.we"></option>
					<option value="4" data-i18n="settings.dayofweek.th"></option>
					<option value="5" data-i18n="settings.dayofweek.fr"></option>
					<option value="6" data-i18n="settings.dayofweek.sa"></option>
					<option value="0" data-i18n="settings.dayofweek.su"></option>
				</select>
			</div>
			<div>
				<select class="homey-form-select" style="display:none; margin-left: 5px;" name="textile[option_extension]" id="textile_option_extension">
					<option value="1" data-i18n="settings.interval_extra.month"></option>
					<option value="2" data-i18n="settings.interval_extra.othermonth"></option>
					<option value="3" data-i18n="settings.interval_extra.quarter"></option>
					<option value="12" data-i18n="settings.interval_extra.year"></option>
				</select>
			</div>
			<div id="textile_startdate_div">
				<p style="display: inline; margin-left: 5px;" for="startdate" data-i18n="settings.startdate"></p>
				<input class="homey-form-input" style="display: inline; margin-left: 5px;" type="date" name="textile[startdate]" id="textile_startdate"></input>
			</div>
        </div>

		<!-- BULKY / GROF VUIL -->
		<div class="homey-form-group">
			<label class="homey-form-label" for="bulky" data-i18n="settings.bulky"></label>
			<div>
				<select class="homey-form-select" name="bulky[option]" id="bulky_option">
					<option value="-1" data-i18n="settings.interval.na"></option>
					<option value="0" data-i18n="settings.interval.automatic"></option>
					<option value="1" data-i18n="settings.interval.everyweek"></option>
					<option value="2" data-i18n="settings.interval.everyotherweek"></option>
					<option value="3" data-i18n="settings.interval.everythreeweeks"></option>
					<option value="4" data-i18n="settings.interval.everyfourweeks"></option>
					<option value="6" data-i18n="settings.interval.everysixweeks"></option>
					<option value="8" data-i18n="settings.interval.everyeighthweeks"></option>
					<option value="11" data-i18n="settings.interval.everyfirst"></option>
					<option value="12" data-i18n="settings.interval.everysecond"></option>
					<option value="13" data-i18n="settings.interval.everythird"></option>
					<option value="14" data-i18n="settings.interval.everyfourth"></option>
					<option value="20" data-i18n="settings.interval.everysecondlast"></option>
					<option value="19" data-i18n="settings.interval.everylast"></option>
				</select>
			</div>
			<div id="bulky_day_div">
				<select class="homey-form-select" style="margin-left: 5px;" name="bulky[day_of_week]" id="bulky_dayofweek">
					<option value="1" data-i18n="settings.dayofweek.mo"></option>
					<option value="2" data-i18n="settings.dayofweek.tu"></option>
					<option value="3" data-i18n="settings.dayofweek.we"></option>
					<option value="4" data-i18n="settings.dayofweek.th"></option>
					<option value="5" data-i18n="settings.dayofweek.fr"></option>
					<option value="6" data-i18n="settings.dayofweek.sa"></option>
					<option value="0" data-i18n="settings.dayofweek.su"></option>
				</select>
			</div>
			<div>
				<select class="homey-form-select" style="display:none; margin-left: 5px;" name="bulky[option_extension]" id="bulky_option_extension">
					<option value="1" data-i18n="settings.interval_extra.month"></option>
					<option value="2" data-i18n="settings.interval_extra.othermonth"></option>
					<option value="3" data-i18n="settings.interval_extra.quarter"></option>
					<option value="12" data-i18n="settings.interval_extra.year"></option>
				</select>
			</div>
			<div id="bulky_startdate_div">
				<p style="display: inline; margin-left: 5px;" for="startdate" data-i18n="settings.startdate"></p>
				<input class="homey-form-input" style="display: inline; margin-left: 5px;" type="date" name="bulky[startdate]" id="bulky_startdate"></input>
			</div>
        </div>

		<!-- GLASS -->
		<div class="homey-form-group">
			<label class="homey-form-label" for="glas" data-i18n="settings.glas"></label>
			<div>
				<select class="homey-form-select" name="glas[option]" id="glas_option">
					<option value="-1" data-i18n="settings.interval.na"></option>
					<option value="0" data-i18n="settings.interval.automatic"></option>
					<option value="1" data-i18n="settings.interval.everyweek"></option>
					<option value="2" data-i18n="settings.interval.everyotherweek"></option>
					<option value="3" data-i18n="settings.interval.everythreeweeks"></option>
					<option value="4" data-i18n="settings.interval.everyfourweeks"></option>
					<option value="6" data-i18n="settings.interval.everysixweeks"></option>
					<option value="8" data-i18n="settings.interval.everyeighthweeks"></option>
					<option value="11" data-i18n="settings.interval.everyfirst"></option>
					<option value="12" data-i18n="settings.interval.everysecond"></option>
					<option value="13" data-i18n="settings.interval.everythird"></option>
					<option value="14" data-i18n="settings.interval.everyfourth"></option>
					<option value="20" data-i18n="settings.interval.everysecondlast"></option>
					<option value="19" data-i18n="settings.interval.everylast"></option>
				</select>
			</div>
			<div id="glas_day_div">
				<select class="homey-form-select" style="margin-left: 5px;" name="glas[day_of_week]" id="glas_dayofweek">
					<option value="1" data-i18n="settings.dayofweek.mo"></option>
					<option value="2" data-i18n="settings.dayofweek.tu"></option>
					<option value="3" data-i18n="settings.dayofweek.we"></option>
					<option value="4" data-i18n="settings.dayofweek.th"></option>
					<option value="5" data-i18n="settings.dayofweek.fr"></option>
					<option value="6" data-i18n="settings.dayofweek.sa"></option>
					<option value="0" data-i18n="settings.dayofweek.su"></option>
				</select>
			</div>
			<div>
				<select class="homey-form-select" style="display:none; margin-left: 5px;" name="glas[option_extension]" id="glas_option_extension">
					<option value="1" data-i18n="settings.interval_extra.month"></option>
					<option value="2" data-i18n="settings.interval_extra.othermonth"></option>
					<option value="3" data-i18n="settings.interval_extra.quarter"></option>
					<option value="12" data-i18n="settings.interval_extra.year"></option>
				</select>
			</div>
			<div id="glas_startdate_div">
				<p style="display: inline; margin-left: 5px;" for="startdate" data-i18n="settings.startdate"></p>
				<input class="homey-form-input" style="display: inline; margin-left: 5px;" type="date" name="glas[startdate]" id="glas_startdate"></input>
			</div>
        </div>
    </fieldset>
    <button id="manualSettingsSave" class="homey-button-primary-full" data-i18n="settings.save" ></button>
	<br /><br />

	<fieldset class="homey-form-fieldset">
		<legend class="homey-form-legend" data-i18n="settings.labeltitle" id="label_input"></legend>
		<p data-i18n="settings.labeldescription"></p>
		<div class="homey-form-group">
			<label class="homey-form-label" for="labelGeneric" data-i18n="settings.labelgeneric"></label>
			<input class="homey-form-input" type="text" id="labelGeneric" name="label[generic]" />
			<p data-i18n="settings.genericlabelhelper"></p>
			<p id="exampleMultiple"></p>
        </div>
		<div class="homey-form-group">
			<label class="homey-form-label" for="labelTimeIndicator" data-i18n="settings.timeindicator"></label>
			<select class="homey-form-select" name="labelDay" id="labelTimeIndicator">
				<option value="0" data-i18n="speech.output.timeindicator.t0"></option>
				<option value="1" data-i18n="speech.output.timeindicator.t1"></option>
				<option value="2" data-i18n="speech.output.timeindicator.t2"></option>
			</select>
			<p data-i18n="settings.timeindicatorDescription"></p>
        </div>
		<div class="homey-form-group">
			<label class="homey-form-label" for="labelsGft" data-i18n="settings.gft"></label>
			<input class="homey-form-input" type="text" id="labelGft" name="label[gft]" />
			<p id="exampleGft"></p>
        </div>
		<div class="homey-form-group">
			<label class="homey-form-label" for="labelRest" data-i18n="settings.rest"></label>
			<input class="homey-form-input" class="homey-form-input" type="text" id="labelRest" name="label[rest]" />
			<p id="exampleRest"></p>
        </div>
		<div class="homey-form-group">
			<label class="homey-form-label" for="labelPapier" data-i18n="settings.paper"></label>
			<input class="homey-form-input" type="text" id="labelPapier" name="label[papier]" />
			<p id="examplePapier"></p>
        </div>
		<div class="homey-form-group">
			<label class="homey-form-label" for="labelPlastic" data-i18n="settings.plastic"></label>
			<input class="homey-form-input" type="text" id="labelPlastic" name="label[plastic]" />
			<p id="examplePlastic"></p>
        </div>
		<div class="homey-form-group">
			<label class="homey-form-label" for="labelPmd" data-i18n="settings.pmd"></label>
			<input class="homey-form-input" type="text" id="labelPmd" name="label[pmd]" />
			<p id="examplePmd"></p>
        </div>
		<div class="homey-form-group">
			<label class="homey-form-label" for="labelTextiel" data-i18n="settings.textile"></label>
			<input class="homey-form-input" type="text" id="labelTextiel" name="label[textiel]" />
			<p id="exampleTextiel"></p>
        </div>
		<div class="homey-form-group">
			<label class="homey-form-label" for="labelGrof" data-i18n="settings.bulky"></label>
			<input class="homey-form-input" type="text" id="labelGrof" name="label[grof]" />
			<p id="exampleGrof"></p>
        </div>
		<div class="homey-form-group">
			<label class="homey-form-label" for="labelGlas" data-i18n="settings.glas"></label>
			<input class="homey-form-input" type="text" id="labelGlas" name="label[glas]" />
			<p id="exampleGlas"></p>
        </div>
		<div class="homey-form-group">
			<label class="homey-form-label" for="labelKerstboom" data-i18n="settings.christmas"></label>
			<input class="homey-form-input" class="homey-form-input" type="text" id="labelKerstboom" name="label[kerstboom]" />
			<p id="exampleKerstboom"></p>
        </div>
		<div class="homey-form-group">
			<label class="homey-form-label" for="labelNone" data-i18n="settings.none"></label>
			<input class="homey-form-input" type="text" id="labelNone" name="label[none]" />
			<p id="exampleNone"></p>
        </div>
	</fieldset>
	<button id="labelInput" class="homey-button-primary-full" style="display:block" data-i18n="settings.saveLabelInput" ></button>
	<br /><br />

	<fieldset id="debug_settings" class="homey-form-fieldset">
		<legend class="homey-form-legend" data-i18n="settings.manualdata.title"></legend>
		<p style="display:block" data-i18n="settings.manualdata.description"></p>
		<div class="homey-form-group">
			<label class="homey-form-label" for="manualDataEntry" data-i18n="settings.manualdata.entryFieldLabel"></label>
			<textarea class="homey-form-textarea" id="manualDataEntry" name="manualDataEntry" width="100%" rows="10"></textarea>
		</div>
		<span id="respManualDataEntry"></span>
	</fieldset>
	<button id="saveManaulDataEntry" class="homey-button-primary-full" style="display:block" data-i18n="settings.manualdata.save" ></button>
	<br /><br />

	<fieldset id="debug_settings" class="homey-form-fieldset">
		<legend class="homey-form-legend" data-i18n="debug.labeltitle"></legend>
		<p style="display:block" data-i18n="debug.labeldescription"></p>
		<div class="homey-form-group" id="respDatesDebug">
        </div>
	</fieldset>
	<button id="refreshDebugInformation" class="homey-button-primary-full" style="display:block" data-i18n="settings.refreshDebugInformation" ></button>
	<br /><br />

	<script type="text/javascript">

        function onHomeyReady( Homey )
		{
			// Register on change events of fields in settings page.
			document.getElementById("apiSave").addEventListener("click", function(elem)
			{
				save( Homey );
				return false; // cancels save event! (we don't need the real button event to be handled).
			});

			document.getElementById("manualSettingsSave").addEventListener("click", function(elem)
			{
				save( Homey );
				return false; // cancels save event! (we don't need the real button event to be handled).
			});

			document.getElementById("labelInput").addEventListener("click", function(elem)
			{
				saveLabelInput( Homey );
				return false; // cancels save event! (we don't need the real button event to be handled).
			});

			document.getElementById("saveManaulDataEntry").addEventListener("click", function(elem)
			{
				saveManaulEntryData( Homey );
				return false; // cancels save event! (we don't need the real button event to be handled).
			});

			document.getElementById("refreshDebugInformation").addEventListener("click", function(elem)
			{
				retrieveCollectionDaysDebug( Homey );
				return false; // cancels save event! (we don't need the real button event to be handled).
			});

			document.getElementById("gft_option").addEventListener("change", function(elem) { ToggleManualInputFields("gft"); });
			document.getElementById("paper_option").addEventListener("change",function(elem) { ToggleManualInputFields("paper"); });
			document.getElementById("rest_option").addEventListener("change", function(elem) { ToggleManualInputFields("rest"); });
			document.getElementById("plastic_option").addEventListener("change", function(elem) { ToggleManualInputFields("plastic"); });
			document.getElementById("pmd_option").addEventListener("change", function(elem) { ToggleManualInputFields("pmd"); });
			document.getElementById("textile_option").addEventListener("change", function(elem) { ToggleManualInputFields("textile"); });
			document.getElementById("bulky_option").addEventListener("change", function(elem) { ToggleManualInputFields("bulky"); });
			document.getElementById("glas_option").addEventListener("change", function(elem) { ToggleManualInputFields("glas"); });

			document.getElementById("gft_option_extension").addEventListener("change", function(elem) { ToggleManualInputFields("gft"); });
			document.getElementById("paper_option_extension").addEventListener("change",function(elem) { ToggleManualInputFields("paper"); });
			document.getElementById("rest_option_extension").addEventListener("change", function(elem) { ToggleManualInputFields("rest"); });
			document.getElementById("plastic_option_extension").addEventListener("change", function(elem) { ToggleManualInputFields("plastic"); });
			document.getElementById("pmd_option_extension").addEventListener("change", function(elem) { ToggleManualInputFields("pmd"); });
			document.getElementById("textile_option_extension").addEventListener("change", function(elem) { ToggleManualInputFields("textile"); });
			document.getElementById("bulky_option_extension").addEventListener("change", function(elem) { ToggleManualInputFields("bulky"); });
			document.getElementById("glas_option_extension").addEventListener("change", function(elem) { ToggleManualInputFields("glas"); });

			document.getElementById("labelTimeIndicator").addEventListener("change", function(elem) { renderGlobalLabel( Homey ); });
			document.getElementById("labelGft").addEventListener("change", function(elem) { renderGlobalLabel( Homey ); });
			document.getElementById("labelRest").addEventListener("change", function(elem) { renderGlobalLabel( Homey ); });
			document.getElementById("labelPmd").addEventListener("change", function(elem) { renderGlobalLabel( Homey ); });
			document.getElementById("labelPlastic").addEventListener("change", function(elem) { renderGlobalLabel( Homey ); });
			document.getElementById("labelPapier").addEventListener("change", function(elem) { renderGlobalLabel( Homey ); });
			document.getElementById("labelTextiel").addEventListener("change", function(elem) { renderGlobalLabel( Homey ); });
			document.getElementById("labelGrof").addEventListener("change", function(elem) { renderGlobalLabel( Homey ); });
			document.getElementById("labelGlas").addEventListener("change", function(elem) { renderGlobalLabel( Homey ); });
			document.getElementById("labelKerstboom").addEventListener("change", function(elem) { renderGlobalLabel( Homey ); });
			document.getElementById("labelNone").addEventListener("change", function(elem) { renderGlobalLabel( Homey ); });
			document.getElementById("labelGeneric").addEventListener("change", function(elem) { renderGlobalLabel( Homey ); });
			
			document.getElementById("country").addEventListener("change", function(elem) { ToggleFieldsBasedOnCountry( Homey ); });

			var respDates = document.getElementById("respDatesDebug");
				respDates.style.color = 'black';
				respDates.innerHTML = "Loading collection days...";

			// Set properties
			ToggleManualInputFields("gft");
			ToggleManualInputFields("paper");
			ToggleManualInputFields("rest");
			ToggleManualInputFields("plastic");
			ToggleManualInputFields("pmd");
			ToggleManualInputFields("textile");
			ToggleManualInputFields("bulky");
			ToggleManualInputFields("glas");
			ToggleFieldsBasedOnCountry( Homey );

			// Retrieve values from Homey settings
        	Homey.get('postcode', function(err, postcode)
        	{
        		if(err)
        		{
        			console.log("not working");
        			return console.error(err);
        		}
        		document.getElementById('postcode').value = postcode;
        	});

			Homey.get('hnumber', function (err, houseNumber)
			{
				console.log('NUMBER', err, houseNumber);
				if (err) {
					console.log("not working");
					return console.error(err);
				}
				document.getElementById('number').value = houseNumber;
			});

			Homey.get('streetName', function (err, streetName)
			{
				console.log('STREET', err, streetName);
				if (err) {
					console.log("not working");
					return console.error(err);
				}
				document.getElementById('streetName').value = streetName;
			});

        	Homey.get('country',function(err, country)
        	{
        		console.log(country);
        		if(err) {
        			return console.error(err);
        		}

        		if(country == 'NL' || country == 'BE') {
        			document.getElementById('country').value = country;
        		} else {
        			document.getElementById('country').value = "NL";
        		}
        	});

        	Homey.get('apiId',function(err, apiId)
        	{
        		if(err){
        			return console.error(err);
        		}

        		document.getElementById("api").value = apiId;
        	});

        	Homey.get('cleanApiId',function(err, cleanApiId)
        	{
        		if(err){
        			return console.error(err);
        		}

        		document.getElementById("cleanApi").value = cleanApiId;
        	});

			Homey.get('manualEntryData',function(err, manualEntryData)
			{
				console.log(manualEntryData);
				if(err) {
					return console.error(err);
				}

				if(manualEntryData !== null && typeof manualEntryData.gft !== 'undefined')
				{
					SetManualEntryFormValues(manualEntryData.gft, "gft");
				} else {
					document.getElementById("gft_option").value = 0;
				}

				if(manualEntryData !== null && typeof manualEntryData.paper !== 'undefined')
				{
					SetManualEntryFormValues(manualEntryData.paper, "paper");
				} else {
					document.getElementById("paper_option").value = 0;
				}

				if(manualEntryData !== null && typeof manualEntryData.rest !== 'undefined')
				{
					SetManualEntryFormValues(manualEntryData.rest, "rest");
				} else {
					document.getElementById("rest_option").value = 0;
				}

				if(manualEntryData !== null && typeof manualEntryData.plastic !== 'undefined')
				{
					SetManualEntryFormValues(manualEntryData.plastic, "plastic");
				} else {
					document.getElementById("plastic_option").value = 0;
				}

				if(manualEntryData !== null && typeof manualEntryData.pmd !== 'undefined')
				{
					SetManualEntryFormValues(manualEntryData.pmd, "pmd");
				} else {
					document.getElementById("pmd_option").value = 0;
				}

				if(manualEntryData !== null && typeof manualEntryData.textile !== 'undefined')
				{
					SetManualEntryFormValues(manualEntryData.textile, "textile");
				} else {
					document.getElementById("textile_option").value = 0;
				}

				if(manualEntryData !== null && typeof manualEntryData.bulky !== 'undefined')
				{
					SetManualEntryFormValues(manualEntryData.bulky, "bulky");
				} else {
					document.getElementById("bulky_option").value = 0;
				}

				if(manualEntryData !== null && typeof manualEntryData.glas !== 'undefined')
				{
					SetManualEntryFormValues(manualEntryData.glas, "glas");
				} else {
					document.getElementById("glas_option").value = 0;
				}
			});

			Homey.get('labelSettings', function(err, labelSettings)
			{
				console.log(labelSettings);
				if(err)
				{
						return console.error(err);
				}

				if(typeof labelSettings.timeindicator !== 'undefined')
				{
					document.getElementById("labelTimeIndicator").value = labelSettings.timeindicator;
				}

				document.getElementById("labelGeneric").placeholder = Homey.__('speech.output.trashtypeycollectedonx');
				if(typeof labelSettings.generic !== 'undefined')
				{
					document.getElementById("labelGeneric").value = labelSettings.generic;
				}

				if(typeof labelSettings.type.gft !== 'undefined')
				{
					SetLabelEntryFormValues(Homey, labelSettings.type.gft, "gft");
				}
				else
				{
					SetLabelEntryFormValues(Homey, Homey.__('settings.gft'), "gft");
				}

				if(typeof labelSettings.type.papier !== 'undefined')
				{
					SetLabelEntryFormValues(Homey, labelSettings.type.papier, "papier");
				}
				else
				{
					SetLabelEntryFormValues(Homey, Homey.__('settings.paper'), "papier");
				}

				if(typeof labelSettings.type.rest !== 'undefined')
				{
					SetLabelEntryFormValues(Homey, labelSettings.type.rest, "rest");
				}
				else
				{
					SetLabelEntryFormValues(Homey, Homey.__('settings.rest'), "rest");
				}

				if(typeof labelSettings.type.plastic !== 'undefined')
				{
					SetLabelEntryFormValues(Homey, labelSettings.type.plastic, "plastic");
				}
				else
				{
					SetLabelEntryFormValues(Homey.__('settings.plastic'), "plastic");
				}

				if(typeof labelSettings.type.pmd !== 'undefined')
				{
					SetLabelEntryFormValues(Homey, labelSettings.type.pmd, "pmd");
				}
				else
				{
					SetLabelEntryFormValues(Homey, Homey.__('settings.pmd'), "pmd");
				}

				if(typeof labelSettings.type.textiel !== 'undefined')
				{
					SetLabelEntryFormValues(Homey, labelSettings.type.textiel, "textiel");
				}
				else
				{
					SetLabelEntryFormValues(Homey, Homey.__('settings.textile'), "textiel");
				}

				if(typeof labelSettings.type.grof !== 'undefined')
				{
					SetLabelEntryFormValues(Homey, labelSettings.type.grof, "grof");
				}
				else
				{
					SetLabelEntryFormValues(Homey, Homey.__('settings.bulky'), "grof");
				}

				if(typeof labelSettings.type.glas !== 'undefined')
				{
					SetLabelEntryFormValues(Homey, labelSettings.type.glas, "glas");
				}
				else
				{
					SetLabelEntryFormValues(Homey, Homey.__('settings.glas'), "glas");
				}

				if(typeof labelSettings.type.kerstboom !== 'undefined')
				{
					SetLabelEntryFormValues(Homey, labelSettings.type.kerstboom, "kerstboom");
				}
				else
				{
					SetLabelEntryFormValues(Homey, Homey.__('settings.christmas'), "kerstboom");
				}

				if(typeof labelSettings.type.none !== 'undefined')
				{
					SetLabelEntryFormValues(Homey, labelSettings.type.none, "none");
				}
				else
				{
					SetLabelEntryFormValues(Homey, Homey.__('settings.none'), "none");
				}

				renderGlobalLabel( Homey );
			});


			retrieveManualInputDays( Homey );
			retrieveCollectionDaysDebug( Homey );

			Homey.ready();
		}

		function retrieveCollectionDaysDebug( Homey )
		{
			var respDates = document.getElementById("respDatesDebug");

			Homey.get('collectingDays', function(err, collectingDays)
			{
				if(err)
				{
					respDates.innerHTML = "No collecting days found.";
					return;
				}

				respDates.innerHTML = "<pre>" + JSON.stringify(collectingDays, null, 2) + "</pre>";
			});
		}

		function retrieveManualInputDays( Homey )
		{
			Homey.get('manualAdditions', function(err, manualAdditions)
        	{
        		if(err || manualAdditions === null)
        		{
					console.log("No data yet.");
					document.getElementById('manualDataEntry').value = "{"
					+"\n\t\"GFT\": [],"
					+"\n\t\"REST\": [],"
					+"\n\t\"PAPIER\": [],"
					+"\n\t\"GROF\": [],"
					+"\n\t\"PLASTIC\": [],"
					+"\n\t\"PMD\": [],"
					+"\n\t\"TEXTIEL\": [],"
					+"\n\t\"KERSTBOOM\": []"
					+"\n}";
        			return console.error(err);
				}

        		document.getElementById('manualDataEntry').value = JSON.stringify(manualAdditions, null, 2);
        	});
		}

		// Save zipcode and housenumber to Homey Settings
        function save( Homey )
        {
			var resp = document.getElementById("resp");
				resp.style.color = 'black';
				resp.innerHTML = Homey.__('settings.checking');

			var respDates = document.getElementById("respDates");
				respDates.style.color = 'black';
				respDates.innerHTML = "";

			var respDatesDebug = document.getElementById("respDatesDebug");
				respDatesDebug.innerHTML = "Loading collection days...";

			// Always save the manual input when save button is pressed
			Homey.set('manualInput', true);
			saveManualInput( Homey );

        	var pc = document.getElementById('postcode').value;
        	var num = document.getElementById('number').value;
        	var streetName = document.getElementById('streetName').value;
			var apiSelected = document.getElementById('api').value;
			var cleanApiSelected = document.getElementById('cleanApi').value;
        	var country = document.getElementById('country').value;

			if(apiSelected === "") { apiSelected = null; }
			if(cleanApiSelected === "") { cleanApiSelected = null; }
			if(pc === "") { pc = null; }
			if(num === "") { num = null; }
			if(streetName === "") { streetName = null; }

			if(pc == null || num == null)
			{
				Homey.set('postcode', '');
				Homey.set('hnumber', '');
				Homey.set('country', 'NL');
				Homey.set('apiId', '');
				Homey.set('cleanApiId', 'not-applicable');
				Homey.set('streetName', '');

				resp.innerHTML = Homey.__('settings.manualonly');
				resp.style.color = 'green';
				retrieveCollectionDaysDebug( Homey );
				return;
			}

        	Homey.api('POST', '/trashcollection', {
        		"postcode":pc,
        		"housenumber":num,
				"streetName":streetName,
        		"country":country,
				"api": apiSelected
        	}, function(err, result) {
        		if(err) { return console.log(err); }

				if(result)
				{
					resp.style.color = 'green';
					resp.innerHTML = Homey.__('settings.update') + pc + ', ' + num + ' in ' + country;
		            Homey.set('postcode', pc);
		            Homey.set('hnumber', num);
		            Homey.set('streetName', streetName);
		            Homey.set('country', country);

					// Retrieve API id & gdates from settings
					Homey.get('apiId', function(err, apiId)
					{
						if(err)
						{
							resp.style.color = 'red';
							return;
						}

						document.getElementById("api").value = apiId;
						respDates.innerHTML = "<br />API ID: " + apiId + respDates.innerHTML;
					});
				}
				else
				{
					resp.innerHTML = Homey.__('settings.fail');
					resp.style.color = 'red';
				}

				retrieveCollectionDaysDebug( Homey );
        		console.log(result);
        	});

			Homey.api('POST', '/clean', {
        		"postcode":pc,
        		"housenumber":num,
				"streetName":streetName,
        		"country":country,
				"cleanApiId": cleanApiSelected
        	}, function(err, result) {
        		if(err) { return console.log(err); }

				if(result)
				{
					// Retrieve API id & gdates from settings
					Homey.get('cleanApiId', function(err, cleanApiId)
					{
						if(err)
						{
							// resp.style.color = 'red';
							return;
						}

						document.getElementById("cleanApi").value = cleanApiId;

						if (cleanApiId !== 'not-applicable') {
							resp.innerHTML += '<br />' + Homey.__('settings.updateCleaning');
						}

						//respDates.innerHTML = "<br />API ID: " + apiId + respDates.innerHTML;
					});
				}
				else
				{
					// resp.innerHTML = Homey.__('settings.fail');
					// resp.style.color = 'red';
				}

				// retrieveCollectionDaysDebug( Homey );
        		console.log(result);
        	});
        }

		// Save manual input data to Homey Settings
		function saveManualInput( Homey )
		{
			Homey.set('manualInput', true);

			var data = {};
			data = SetManualInputDataFor("gft", data);
			data = SetManualInputDataFor("rest", data);
			data = SetManualInputDataFor("pmd", data);
			data = SetManualInputDataFor("plastic", data);
			data = SetManualInputDataFor("paper", data);
			data = SetManualInputDataFor("textile", data);
			data = SetManualInputDataFor("bulky", data);
			data = SetManualInputDataFor("glas", data);

			console.log(data);
			Homey.set('manualEntryData', data);
		}

		// Save extra manual data entry
		function saveManaulEntryData( Homey )
		{
			var data = {};

			var textualInput = {};
			try
			{
				textualInput = JSON.parse(document.getElementById('manualDataEntry').value);
			}
			catch(err)
			{
				console.log(err);
				document.getElementById('respManualDataEntry').innerHTML = err;
				return;
			}

			document.getElementById('respManualDataEntry').innerHTML = "";

			if(typeof textualInput.GFT !== 'undefined')
			{
				data.GFT = validateDates(textualInput.GFT);
			}
			else
			{
				data.GFT = [];
			}

			if(typeof textualInput.REST !== 'undefined')
			{
				data.REST = validateDates(textualInput.REST);
			}
			else
			{
				data.REST = [];
			}

			if(typeof textualInput.PAPIER !== 'undefined')
			{
				data.PAPIER = validateDates(textualInput.PAPIER);
			}
			else
			{
				data.PAPIER = [];
			}

			if(typeof textualInput.GROF !== 'undefined')
			{
				data.GROF = validateDates(textualInput.GROF);
			}
			else
			{
				data.GROF = [];
			}

			if(typeof textualInput.PLASTIC !== 'undefined')
			{
				data.PLASTIC = validateDates(textualInput.PLASTIC);
			}
			else
			{
				data.PLASTIC = [];
			}

			if(typeof textualInput.PMD !== 'undefined')
			{
				data.PMD = validateDates(textualInput.PMD);
			}
			else
			{
				data.PMD = [];
			}

			if(typeof textualInput.KERSTBOOM !== 'undefined')
			{
				data.KERSTBOOM = validateDates(textualInput.KERSTBOOM);
			}
			else
			{
				data.KERSTBOOM = [];
			}

			Homey.set('manualAdditions', data);

			// We trigger a full save, to make sure everything is recalculated (a bit heavy, but this feature shouldn't be used that often)
			save( Homey );
			saveLabelInput( Homey );

			// Retrieve them again & update field (for formatting & feedback purposes)
			retrieveManualInputDays( Homey );
		}

		function validateDates(inputArray)
		{
			var output = [];

			for(var i=0;i<inputArray.length; i++)
			{
				var validDate = new Date(inputArray[i]);

				month = '' + (validDate.getMonth() + 1),
				day = '' + validDate.getDate(),
				year = validDate.getFullYear();

				if (month.length < 2)
					month = '0' + month;
				if (day.length < 2)
					day = '0' + day;

				output.push([year, month, day].join('-'));
			}

			return output;
		}

		function renderGlobalLabel( Homey )
		{
			var sentence = "<i>Example: " + document.getElementById("labelGeneric").value + "</i>";
			var timeReplacement = Homey.__("speech.output.timeindicator.t" + document.getElementById("labelTimeIndicator").value);
			var types = ["gft","rest","pmd","plastic","papier","textiel","grof","glas","none"];
			var replacementSingle = Homey.__("speech.output.replacementsingle");
			var replacementPlural = Homey.__("speech.output.replacementplural");

			for(var i=0; i<types.length; i+=1)
			{
				var typeReplacement = document.getElementById("label"+capitalizeFirstLetter(types[i])).value;
				document.getElementById("example"+capitalizeFirstLetter(types[i])).innerHTML = sentence.replace("__time__",timeReplacement).replace("__type__",typeReplacement).replace("__plural__",replacementSingle);
			}

			var multipleTypesReplacement = document.getElementById("labelGft").value + ", " + document.getElementById("labelPlastic").value + " " + Homey.__("speech.output.and") + " " + document.getElementById("labelGrof").value;
			document.getElementById("exampleMultiple").innerHTML = sentence.replace("__time__",timeReplacement).replace("__type__",multipleTypesReplacement).replace("__plural__",replacementPlural);
		}

		// Saves label values into Homey settings
		function saveLabelInput( Homey )
		{
			var data = {
				timeindicator: document.getElementById("labelTimeIndicator").value,
				generic: document.getElementById("labelGeneric").value,
				type: {
					gft: document.getElementById("labelGft").value,
					rest: document.getElementById("labelRest").value,
					pmd: document.getElementById("labelPmd").value,
					plastic: document.getElementById("labelPlastic").value,
					papier: document.getElementById("labelPapier").value,
					textiel: document.getElementById("labelTextiel").value,
					grof: document.getElementById("labelGrof").value,
					glas: document.getElementById("labelGlas").value,
					kerstboom: document.getElementById("labelKerstboom").value,
					none: document.getElementById("labelNone").value
				}
			};

			console.log(data);
			Homey.set('labelSettings', data);
		}

		// Sets values given in "values" to the given "type" on the form.
		function SetManualEntryFormValues(values, type)
		{
			document.getElementById(type + "_option").value = values.option;
			document.getElementById(type + "_dayofweek").value = values.day;
			document.getElementById(type + "_option_extension").value = values.option_extension;

			if(typeof values.startdate !== 'undefined' && values.startdate !== null)
			{
				document.getElementById(type + "_startdate").value = values.startdate.substring(0, 10);
			}

			ToggleManualInputFields(type);
		}

		function capitalizeFirstLetter(string) {
			return string.charAt(0).toUpperCase() + string.slice(1);
		}

		// Sets values given in "values" to the given "type" on the form.
		function SetLabelEntryFormValues(Homey, values, type)
		{
			document.getElementById("label" + capitalizeFirstLetter(type)).value = values;
			document.getElementById("label" + capitalizeFirstLetter(type)).placeholder = values;
		}

		// Retrieves all manual values from the form based on given "type" and adds them to the "data" element.
		function SetManualInputDataFor(type, data)
		{
			// If not applicable, leave empty.
			if(document.getElementById(type + "_option").value == 0)
			{
				return data;
			}

			data[type] = {};
			data[type].option = document.getElementById(type + "_option").value;
			data[type].startdate = document.getElementById(type + "_startdate").value;
			data[type].day = document.getElementById(type + "_dayofweek").value;

			if(data[type].option >= 10) {
				data[type].option_extension = document.getElementById(type + "_option_extension").value;
			}
			else {
				data[type].option_extension = -1;
			}

			return data;
		}

		// Toggle street name
		var optionSetStore = null;
		function ToggleFieldsBasedOnCountry(Homey)
		{
			const countrySelected = document.getElementById('country').value;
			// const ddl = document.getElementById('country');

			// if(optionSetStore === null) {
			// 	optionSetStore = new Array();
			// 	for (i = 0; i < ddl.options.length; i++) {
			// 		optionSetStore[i] = ddl .options[i].value;
			// 	}
			// }

			if(countrySelected === 'NL') {
            	document.getElementById("streetName_div").style.display = 'none';
            } else if(countrySelected === 'BE') {
            	document.getElementById("streetName_div").style.display = 'block';
            }
		}

		// Toggles fields on the form based on the given element
		function ToggleManualInputFields(prefix)
		{
			var value = document.getElementById(prefix + "_option").value;
			var optionExtensionValue = document.getElementById(prefix + "_option_extension").value;

			if(value >= 11) {
				document.getElementById(prefix + "_option_extension").style.display = 'block';
				document.getElementById(prefix + "_day_div").style.display = 'block';

				if(optionExtensionValue == 2)
				{
					document.getElementById(prefix + "_startdate_div").style.display = 'block';
				}
				else
				{
					document.getElementById(prefix + "_startdate_div").style.display = 'none';
				}
			}
			else if(value == 1)
			{
				document.getElementById(prefix + "_option_extension").style.display = 'none';
				document.getElementById(prefix + "_startdate_div").style.display = 'none';
				document.getElementById(prefix + "_day_div").style.display = 'block';
			}
			else if(value == 0 || value == -1)
			{
				document.getElementById(prefix + "_option_extension").style.display = 'none';
				document.getElementById(prefix + "_startdate_div").style.display = 'none';
				document.getElementById(prefix + "_day_div").style.display = 'none';
			}
			else {
				document.getElementById(prefix + "_option_extension").style.display = 'none';
				document.getElementById(prefix + "_startdate_div").style.display = 'block';
				document.getElementById(prefix + "_day_div").style.display = 'block';
			}
		}
	</script>
</body>
</html>
